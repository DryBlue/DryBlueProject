<!DOCTYPE html>
<html xmlns:th="http://w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Aggiunta Macchinario</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
        .card-registration .select-input.form-control[readonly]:not([disabled]) {
            font-size: 1rem;
            line-height: 2.15;
            padding-left: .75em;
            padding-right: .75em;
        }
        .card-registration .select-arrow {
            top: 13px;
        }
    </style>
</head>
<body>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>

<div th:replace="navbarOperatore :: navbarOperatore"></div>

<section class="h-100 bg-dark">
    <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col">
                <div class="card card-registration my-4">
                    <div class="row g-0">
                        <div class="col-xl-6 d-none d-xl-block">
                            <img
                                    src="http://www.zaccarelli.it/images/allestimento-h.jpg"
                                    alt="Sample photo"
                                    class="img-fluid"
                                    style="border-top-left-radius: .25rem; border-bottom-left-radius: .25rem;"
                            />
                        </div>
                        <div class="col-xl-6">
                            <div class="card-body p-md-5 text-black">
                                <h3 class="mb-5 text-uppercase">Aggiungi di un macchinario</h3>

                                <div id="error" class="text-danger"></div>

                                <form method="post" id="form" th:action="@{/servizio/aggiuntaMacchinario}">
                                    <div class="form-group">
                                        <label class="form-label" for="denomination">Denominazione*</label><br>
                                        <input type="text" class="form-control form-control-lg" placeholder="Denominazione" id="denomination" name="denomination">
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="matricola">Matricola*</label><br>
                                        <input type="text" class="form-control form-control-lg" placeholder="Matricola" id="matricola" name="matricola">
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="costruttore">Costruttore</label><br>
                                        <input type="text" class="form-control form-control-lg" placeholder="Costruttore" id="costruttore" name="costruttore">
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="caratteristiche">Caratteristiche</label><br>
                                        <input type="text" class="form-control form-control-lg" placeholder="Caratteristiche" id="caratteristiche" name="caratteristiche">
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="manutentore">Manutentore*</label><br>
                                        <input type="text" class="form-control form-control-lg" placeholder="Manutentore" id="manutentore" name="manutentore">
                                    </div>

                                    <br>
                                    <div class="form-group">
                                    <label class="form-label" for="indirizzoSede">Sede*</label>
                                    <select name="indirizzoSede" id="indirizzoSede">
                                        <div th:each="sede : ${sedi}">

                                            <option th:text="${sede.indirizzo}"></option>
                                        </div>
                                    </select>
                                    <br>

                                    <div class="form-group">
                                        <label class="form-label" for="numeroMan">Numero Manutenzione</label><br>
                                        <input type="text" class="form-control form-control-lg" placeholder="Numero Manutenzione" id="numeroMan" name="numeroMan">
                                    </div>
                                    <br>
                                    <small id="riempimentoHelp" class="form-text text-muted">I campi con * sono obbligatori</small>
                                    <br>

                                    <button  type="submit" class="btn btn-primary" onclick="macchinarioCheck()">Aggiungi</button>
                                    <button  type="reset" class="btn btn-primary">Annulla</button>

                                </form>


                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



<!--
<div class="container-sm">
    <div class="row">
        <div class="col-6">
<h3>Aggiunta di un Macchinario</h3><br>

            <div id="error" class="text-danger"></div>

<form method="post" id="form" th:action="@{/servizio/aggiuntaMacchinario}">
    <div class="form-group">
        <label for="denomination">Denominazione*</label><br>
     <input type="text" placeholder="Denominazione" id="denomination" name="denomination">
    </div>

    <div class="form-group">
        <label for="matricola">Matricola*</label><br>
    <input type="text" placeholder="Matricola" id="matricola" name="matricola">
    </div>

    <div class="form-group">
        <label for="costruttore">Costruttore</label><br>
    <input type="text" placeholder="Costruttore" id="costruttore" name="costruttore">
    </div>

    <div class="form-group">
        <label for="caratteristiche">Caratteristiche</label><br>
    <input type="text" placeholder="Caratteristiche" id="caratteristiche" name="caratteristiche">
    </div>

    <div class="form-group">
        <label for="manutentore">Manutentore*</label><br>
    <input type="text" placeholder="Manutentore" id="manutentore" name="manutentore">
    </div>

        <label for="indirizzoSede">Sede*</label>
    <select name="indirizzoSede" id="indirizzoSede">
        <div th:each="sede : ${sedi}">

            <option th:text="${sede.indirizzo}"></option>
        </div>
    </select>
    <br>

    <div class="form-group">
        <label for="numeroMan">Numero Manutenzione</label><br>
    <input type="text" placeholder="Numero Manutenzione" id="numeroMan" name="numeroMan">
    </div>
    <br>
    <small id="riempimentoHelp" class="form-text text-muted">I campi con * sono obbligatori</small>
    <br>

    <button button type="submit" class="btn btn-primary" onclick="macchinarioCheck()">Aggiungi</button>
    <button button type="reset" class="btn btn-primary">Annulla</button>

</form>

        </div>
    </div>
</div>

-->

<script type="text/javascript">
    function macchinarioCheck(){
        const denomination = document.getElementById('denomination');
        const matricola = document.getElementById('matricola');
        const costruttore = document.getElementById('costruttore');
        const caratteristiche = document.getElementById('caratteristiche');
        const manutentore = document.getElementById('manutentore');
        const form = document.getElementById('form');
        const errorElement = document.getElementById('error');
        var patternName = /^[a-zA-Z ]+$/;
        var patternMatricola = /^[a-zA-Z0-9 ]+$/;
        var patternCaratteristiche = /^([a-zA-Z0-9\,]\s?)+$/;

        form.addEventListener('submit', (e) =>{
            let messages = [];

            if (denomination.value === '' || denomination.value === null){
                messages.push('Inserisci denominazione')
            }

            if (matricola.value === '' || matricola.value === null){
                messages.push('Inserisci matricola')
            }

            if (manutentore.value === '' || manutentore.value === null){
                messages.push('Inserisci manutentore')
            }


            if (denomination.value.length < 2){
                messages.push('Denominazione troppo corta')
            }

            if (denomination.value.length > 15){
                messages.push('Denominazione troppo lunga')
            }

            if(!denomination.value.match(patternName)){
                messages.push('Formato della denominazione non valido')
            }

            if (matricola.value.length < 4){
                messages.push('Matricola troppo corta')
            }

            if (matricola.value.length > 21){
                messages.push('Matricola troppo lunga')
            }

            if(!matricola.value.match(patternMatricola)){
                messages.push('Formato della matricola non valido')
            }

            if (caratteristiche.value.length > 80){
                messages.push('Caratteristiche troppo lunghe')
            }


            if (costruttore.value.length > 20){
                messages.push('Costruttore troppo lungo')
            }

            if(!costruttore.value.match(patternName)){
                messages.push('Formato indirizzo non valido')
            }

            if (!caratteristiche.value.match(patternCaratteristiche)){
                messages.push('Formato caratteristiche non valido')
            }

            if (messages.length > 0){
                e.preventDefault()
                errorElement.innerText = messages.join(', ')

            }

        })
    }
</script>

</body>
</html>